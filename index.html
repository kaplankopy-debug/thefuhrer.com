<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>thefuhrer.com — World at War Map (1943)</title>

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    html, body { height: 100%; margin: 0; background:#0b0d10; }
    #map { height: 100%; width: 100%; }

    /* Minimal academic overlay */
    .overlay {
      position: fixed;
      left: 14px; bottom: 14px;
      max-width: min(560px, calc(100vw - 28px));
      background: rgba(17,21,27,.85);
      border: 1px solid rgba(33,42,54,.9);
      color: #e6e8eb;
      font: 14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      padding: 12px 14px;
      border-radius: 14px;
      backdrop-filter: blur(6px);
      z-index: 9999;
    }
    .overlay .title { font-weight: 700; margin-bottom: 6px; }
    .overlay .meta { color:#a8b0bb; font-size: 12px; line-height: 1.35; }
    .overlay a { color:#7ab7ff; text-decoration:none; }
    .overlay a:hover { text-decoration: underline; }

    /* Leaflet tweaks for a cleaner “archive” look */
    .leaflet-control-attribution {
      background: rgba(17,21,27,.75) !important;
      color:#a8b0bb !important;
    }
    .leaflet-control-zoom a {
      background: rgba(17,21,27,.85) !important;
      color:#e6e8eb !important;
      border:1px solid rgba(33,42,54,.9) !important;
    }

    /* Subtle paper/aged map feel (optional but nice) */
    #map::after{
      content:"";
      position:absolute; inset:0;
      pointer-events:none;
      background:
        radial-gradient(1200px 800px at 30% 20%, rgba(255,240,210,.08), transparent 60%),
        radial-gradient(900px 700px at 70% 70%, rgba(255,240,210,.06), transparent 55%),
        linear-gradient(to bottom, rgba(0,0,0,.10), rgba(0,0,0,.35));
      mix-blend-mode: screen;
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <div class="overlay">
    <div class="title">The World at War (February 1943)</div>
    <div class="meta">
      Public-domain U.S. military map (via Wikimedia Commons). Source listing references David Rumsey Map Collection.<br/>
      Tip: scroll to zoom, click-drag to pan.
      <br/><br/>
      <a href="https://commons.wikimedia.org/wiki/File:The_World_at_war,_1943.jpg" target="_blank" rel="noopener">
        View source on Wikimedia Commons
      </a>
    </div>
  </div>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    // Image dimensions for this specific file on Wikimedia Commons:
    // 3492 × 2613
    const imageWidth = 3492;
    const imageHeight = 2613;

    // ✅ Correct direct image URL (your previous one likely 404'd)
    const imageUrl = "https://upload.wikimedia.org/wikipedia/commons/1/1c/The_World_at_war%2C_1943.jpg";

    // Leaflet "simple CRS" provides zoom/pan for a flat image
    const map = L.map("map", {
      crs: L.CRS.Simple,
      minZoom: -2,
      maxZoom: 4,
      zoomControl: true,
      attributionControl: true,
      preferCanvas: true
    });

    const bounds = [[0, 0], [imageHeight, imageWidth]];

    const overlay = L.imageOverlay(imageUrl, bounds, {
      crossOrigin: true
    }).addTo(map);

    map.fitBounds(bounds);

    // Keep panning constrained to the image bounds
    map.setMaxBounds(bounds);
    map.on("drag", () => map.panInsideBounds(bounds, { animate: false }));

    // If the image fails to load, show a clear message
    overlay.on("error", () => {
      const msg = document.createElement("div");
      msg.style.position = "fixed";
      msg.style.top = "14px";
      msg.style.left = "14px";
      msg.style.right = "14px";
      msg.style.padding = "12px 14px";
      msg.style.background = "rgba(120,0,0,.75)";
      msg.style.border = "1px solid rgba(255,255,255,.15)";
      msg.style.borderRadius = "12px";
      msg.style.color = "#fff";
      msg.style.font = "14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      msg.style.zIndex = "99999";
      msg.textContent = "Map image failed to load. Ensure the site is on HTTPS and the image URL is reachable.";
      document.body.appendChild(msg);
    });
  </script>
</body>
</html>
